#Analyse Sentiment
import nltk
nltk.download('vader_lexicon')
from nltk.sentiment.vader import SentimentIntensityAnalyzer
sid = SentimentIntensityAnalyzer()

list1 = []
for i in df['Clean Tweet']:
    list1.append((sid.polarity_scores(str(i)))['compound'])

#Convert the compound scores into categories - positive, negative and neutral
df['sentiment'] = pd.Series(list1)
def sentiment_category(sentiment):
    label = ''
    if(sentiment>0):
        label = 'positive'
    elif(sentiment == 0):
        label = 'neutral'
    else:
        label = 'negative'
    return(label)
df['sentiment_category'] = df['sentiment'].apply(sentiment_category)

#Group positive and negative sentiment and count them by date
neg = df[df['sentiment_category']=='negative']
neg = neg.groupby(['Tweet Datetime'],as_index=False).count()
pos = df[df['sentiment_category']=='positive']
pos = pos.groupby(['Tweet Datetime'],as_index=False).count()
pos = pos[['Tweet Datetime','Tweet Id']]
neg = neg[['Tweet Datetime','Tweet Id']]
